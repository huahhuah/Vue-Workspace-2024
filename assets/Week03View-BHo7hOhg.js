import{o as a,c,b as m,ae as k,a as e,X as C,t as l,F as h,w as x,am as g,r as p,j as V,P as $,v as D}from"./index-B9905C2Z.js";const S=["onClick"],T={class:"d-flex w-100 justify-content-between"},U={class:"mb-1"},j={class:"mb-1"},B={__name:"ProductList",props:["data"],emits:["addCart"],setup(d,{emit:u}){const r=u;return(t,v)=>(a(!0),c(h,null,m(d.data,n=>(a(),c("a",{href:"#",class:"list-group-item list-group-item-action",key:n.id,onClick:k(i=>r("addCart",n),["prevent"])},[e("div",T,[e("h5",U,[C(l(n.name)+" ",1),e("small",null,"$"+l(n.price),1)])]),e("p",j,l(n.description),1)],8,S))),128))}},I=["onClick"],M=["onUpdate:modelValue","onChange"],N=["value"],F={__name:"CartItem",props:["cart"],emits:["deleteCart","updateCart"],setup(d,{emit:u}){const r=u;return(t,v)=>(a(!0),c(h,null,m(d.cart,n=>(a(),c("tr",{key:n.id},[e("td",null,[e("button",{onClick:i=>r("deleteCart",n.id),class:"btn btn-secondary btn-sm",type:"button"}," x ",8,I)]),e("td",null,l(n.name),1),e("td",null,[e("small",null,l(n.description),1)]),e("td",null,[x(e("select",{class:"form-select","onUpdate:modelValue":i=>n.amount=i,onChange:i=>r("updateCart",n)},[(a(),c(h,null,m(10,i=>e("option",{key:i,value:i},l(i),9,N)),64))],40,M),[[g,n.amount]])]),e("td",null,l(n.price),1),e("td",null,l(n.price*n.amount),1)]))),128))}},L={class:"card-body"},O=e("div",{class:"card-title"},[e("h3",null,"訂單")],-1),P={class:"table"},Q=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"品項"),e("th",{scope:"col"},"數量"),e("th",{scope:"col"},"小計")])],-1),A={class:"text-end mb-3"},E=e("br",null,null,-1),W={__name:"OrderItem",props:["order"],setup(d){return(u,r)=>(a(),c("div",L,[O,e("table",P,[Q,e("tbody",null,[(a(!0),c(h,null,m(d.order.cart,t=>(a(),c("tr",{key:t.id},[e("td",null,l(t.name),1),e("td",null,l(t.amount),1),e("td",null,l(t.price*t.amount),1)]))),128))])]),e("div",A,[e("div",null,"備註："+l(d.order.description),1),E,e("h4",null,[C(" 總計："),e("span",null,"$"+l(d.order.total),1)])])]))}},X={class:"container mt-5"},q={class:"row"},z={class:"col-md-4"},G={class:"list-group"},H={class:"col-md-8"},J={key:0,class:"alert alert-primary text-center",role:"alert"},K={key:1},R={class:"table"},Y=e("thead",null,[e("tr",null,[e("th",{scope:"col",width:"50"},"操作"),e("th",{scope:"col"},"品項"),e("th",{scope:"col"},"描述"),e("th",{scope:"col",width:"90"},"數量"),e("th",{scope:"col"},"單價"),e("th",{scope:"col"},"小計")])],-1),Z={class:"text-end mb-3"},ee={class:"text-end"},te=e("hr",null,null,-1),ne={class:"row justify-content-center"},se={class:"col-md-8"},le={key:0,class:"alert alert-primary text-center",role:"alert"},oe={key:1,class:"card"},ae=e("br",null,null,-1),ie={__name:"Week03View",setup(d){const u=p([{id:1,name:"珍珠奶茶",description:"香濃奶茶搭配QQ珍珠",price:50},{id:2,name:"冬瓜檸檬",description:"清新冬瓜配上新鮮檸檬",price:45},{id:3,name:"翡翠檸檬",description:"綠茶與檸檬的完美結合",price:55},{id:4,name:"四季春茶",description:"香醇四季春茶，回甘無比",price:45},{id:5,name:"阿薩姆奶茶",description:"阿薩姆紅茶搭配香醇鮮奶",price:50},{id:6,name:"檸檬冰茶",description:"檸檬與冰茶的清新組合",price:45},{id:7,name:"芒果綠茶",description:"芒果與綠茶的獨特風味",price:55},{id:8,name:"抹茶拿鐵",description:"抹茶與鮮奶的絕配",price:60}]),r=p({}),t=p([]),v=o=>{const s=t.value.find(b=>b.name===o.name);s?(alert(`[${s.name}已加入購物車,請更改需要的數量!]`),s.amount+=1):t.value.push({...o,id:new Date().getTime(),amount:1})},n=o=>{t.value=t.value.map(s=>(s.id===o.id&&(s.sum=parseInt(o.price)),s))},i=o=>{t.value=t.value.filter(s=>s.id!==o)},y=o=>o.price*o.amount,f=V(()=>t.value.reduce((o,s)=>o+s.price*s.amount,0)),_=p(""),w=()=>{r.value={id:new Date().getTime(),cart:t.value,description:_.value,total:f.value},t.value=[],_.value=""};return(o,s)=>(a(),c("div",X,[e("div",q,[e("div",z,[e("div",G,[$(B,{data:u.value,onAddCart:v},null,8,["data"])])]),e("div",H,[t.value.length===0?(a(),c("div",J," 請選擇商品 ")):(a(),c("div",K,[e("table",R,[Y,e("tbody",null,[$(F,{cart:t.value,onDeleteCart:i,onUpdateCart:n,onItemSum:y},null,8,["cart"])])]),e("div",Z,[e("h4",null,[C(" 總計："),e("span",null,"$"+l(f.value),1)]),x(e("textarea",{class:"form-control mb-3",rows:"3",placeholder:"備註","onUpdate:modelValue":s[0]||(s[0]=b=>_.value=b)},null,512),[[D,_.value]]),e("div",ee,[e("button",{onClick:k(w,["prevent"]),class:"btn btn-primary"},"送出")])])]))])]),te,e("div",ne,[e("div",se,[r.value.id?(a(),c("div",oe,[$(W,{order:r.value,onItemSum:y},null,8,["order"])])):(a(),c("div",le," 尚未建立訂單 "))])]),ae]))}};export{ie as default};
